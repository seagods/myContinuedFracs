\documentclass[16pt]{article}

\setlength{\textheight}{220.0mm}
\setlength{\textwidth}{150.0mm}
\setlength{\oddsidemargin}{0.0mm}
\setlength{\evensidemargin}{20.0mm}
\setlength{\parskip}{5.0mm}
\setlength{\parindent}{5.0mm}
\setlength{\unitlength}{1.0mm}

\newtheorem{defn}{Definition}
\renewcommand{\baselinestretch}{1.2}

\font\bgreek = cmmib10 scaled \magstep1
\def\gammavec{\hbox{\bgreek\char'15}}		% Vector gamma.
\def\bargamma{\skew2\tilde{\gammavec}}		% Vector gamma, bar

\def\Xint#1{\mathchoice
{\XXint\displaystyle\textstyle{#1}}%
{\XXint\textstyle\scriptstyle{#1}}%
{\XXint\scriptstyle\scriptscriptstyle{#1}}%
{\XXint\scriptscriptstyle\scriptscriptstyle{#1}}%
\!\int}
\def\XXint#1#2#3{{\setbox0=\hbox{$#1{#2#3}{\int}$ }
\vcenter{\hbox{$#2#3$ }}\kern-.55\wd0}}
\def\ddashint{\Xint=}
\def\dashint{\Xint-}

\usepackage{amsmath}  %% need if only for numberwithin!
\numberwithin{equation}{section}
\numberwithin{figure}{section}

\usepackage{esint}  %% more nice integral signs
%%  Note texlive-esint must be installed for this to work!
\usepackage{amssymb}  %% set of reals etc.
\usepackage{amsfonts} %% need for the set \mathcal{R} etc
\usepackage{braket} %% Dirac bra and ket vectors

%% Here we are using biblatex rather than bibtex
%%\usepackage[backend=bibtex, sorting=none]{biblatex} %Without sorting=none we get alphaphetical

%%\bibliographystyle{prsty}
%%\bibliography{./Vol3.bib}

\usepackage{fancyhdr}  %% copied from Latex Hints and Tips
\pagestyle{fancy}
%% L/C/R denote left/center/right header (or footer) elements
%% E/O denote even/odd pages

%% \leftmark, \rightmark are chapter/section headings generated by the 
\fancyhead[LE,RO]{\slshape\thepage}
\fancyhead[RE]{\slshape \leftmark}
\fancyhead[LO]{\slshape \rightmark}
%%\fancyfoot[LO,LE]{\slshape Short Course on Asymptotics} %% Don't want a footnote
\fancyfoot[C]{}
%%\fancyfoot[RO,RE]{\slshape 7/15/2002}  %% Leave it out!

%% book document class

\usepackage{mathrsfs}


\numberwithin{figure}{section}
%\numberwithin{figure}{subsection}
\numberwithin{equation}{section}
%\numberwithin{equation}{subsection

\newcommand*{\cofrac}[2]{%
  {%
    \rlap{$\dfrac{1}{\phantom{#1}}$}%
    \genfrac{}{}{0pt}{0}{}{#1+#2}%
  }%
}


\newcommand{\K}{\operatornamewithlimits{K}}

\newtheorem{theorem}{Theorem}
\newtheorem{axiom}{Axiom}


\begin{document}

\thispagestyle{empty}

\title{My Continued Fractions at GitHub}
\author{Chris Godsalve}
\maketitle

\tableofcontents

\section{Introduction}

Hwere, we shall simply state what continued fractions are and list whatever theorems and results
the code here uses. (I shall put in some decent references later.)
I started off by writing a class for simple fractions, that is fractions
of the form 
\begin{equation}
F=a+\frac{b}{c}=\frac{B}{c}.
\end{equation}
OK, we have overloaded *,/,+, and - operators and so on. The integers $a$, $b$, $c$, and $B$
 are going to be positive in every case. The class has a bool member to give $F$ a sign.
The thing to note here is the integers are Gnu Multiple Precision numbers. That is to say, these numbers
can be arbitrarily large: the are not constrained by 32 or 64 bits to represent them.
We have the option to GetFloat --- get the floating point value. we can set a limit to the number
 of bytes we can use, and JumpToFloat if the integers go over that limit. Once 
that is done, the fraction only has a floating point value. The GMPfrac class
has a bool member called float which is false until JumpToFloat is called. It also
has a member to represent the floating point value.

So, the integers are members of Gnu Multiple Precision's {mpz\_class}. (These are signed integers).
The rationals $\frac{a}{b}$  and $\frac{B}{c}$ are handled using the GMP {mpq\_class}, and the
floating point numbers are handled using the GMP {mpf\_class}. The thing about the GMP rationals, is
 that the results of all arithmetic operations are automatically reduced using successive applications
of  the Euclidean Algorithm (which computes the gratest common factor of two integers).
It might turn out that we don't really need the fractions class that I wrote, but I have included it
in MyLib (https://github.com/seagods/MyLib.git). Anyhow, what do we mean by a continued fraction?

\section{What is a Continued Fraction}

A famous  example of an {\it infinitely} continued fraction is 
\begin{equation}
\sqrt{2}=CF_{\inf}=1+\cfrac{1}{2+\cfrac{1}{2+\cfrac{1}{2+\cfrac{1}{2+\ldots}}}},
\end{equation}
In practice, we can make this a finite fraction by just stopping at some point.
We can define the following as $convergents$ of the continued fraction, namely
the finite continued fractions
\begin{equation}
CF_{0}=1, \> \> CF_{1}=1+\frac{1}{2},
$$   $$
CF_{2}=1+\cfrac{1}{2+\cfrac{1}{2}},
$$   $$
CF_{3}=1+\cfrac{1}{2+\cfrac{1}{2+\cfrac{1}{2}}},
\label{Sea3}
\end{equation}
and so on.  Clearly
\begin{equation}
CF_{3}=1+\cfrac{1}{2+\cfrac{2}{5} }=1+\frac{5}{12}=\frac{17}{12}.
\end{equation}
Any finite continued fraction is a rational number. The next thing to note is that we can represent
the same continued fraction in infinitely many ways! Suppose we have some positive or negative 
intager  $p$. Looking at $CF_3$, we see that
\begin{equation}
CF_{3}=1+\cfrac{(p/p)}{2+\cfrac{1}{2+\cfrac{1}{2}}}=1+\cfrac{p}{2p+\cfrac{p}{2+\cfrac{1}{2}}}.
\end{equation}
Similarly, we can introduce another non zero integer $q$, and
\begin{equation}
CF_{3}=1+\cfrac{p}{2p+\cfrac{p (q/q)}{2+\cfrac{1}{2}}}1+\cfrac{p}{2p+\cfrac{p q}{2q+\cfrac{q}{2}}}.
\end{equation}
So given any rational, we may express it as a finite continued fraction in an infinity of ways.

\subsection{Notation for a General Continued Fraction}

Obviously, this way of writing things down get's out of hand as we get to $CF_{50}$, and a more compact
notation is necessary. We write our general contined fraction using integers $a$ and $b$, and put
\begin{equation}
CF_{\inf}=b_0+\cfrac{a_1}{b_1+\cfrac{a_2}{b_2+\cfrac{a_3}{b_3+\cfrac{b_4}{c_4+\ldots}}}}.
\end{equation}
Two common notations are to write
\begin{equation}
CF_{\infty}=b_0 +\frac{a_1 \vert}{\vert b_1}+\frac{a_2 \vert}{\vert b_2}
+\frac{a_3 \vert}{\vert b_3}+\ldots
=b_0+\K_{i=1}^\infty \frac{a_i}{b_i}.
\end{equation}
the $K$ in the second representation comes from the German "Ketternbruch" which translates as
"chain fraction". We can represent our $CF_3$ for $\sqrt{2}$ as
\begin{equation}
CF_{3}=1 +\frac{1 \vert}{\vert 2}+\frac{1 \vert}{\vert 2}
+\frac{1 \vert}{\vert 2}
=1+\K_{i=1}^3 \frac{1}{2}.
\end{equation}


\section{How do we Compute Continued Fractions}


We start with the finite fraction
\begin{equation}
CF_{3}=b_0 +\cfrac{a_1}{b_1+\cfrac{a_2}{b_2+\cfrac{a_3}{b_3}}}.
\end{equation}
One we we might proceed is to use our GMPfrac class to compute this, but `by hand' we see that
\begin{equation}
F_1=b_2+\cfrac{a_3}{b_3},
$$ then  $$
F_2 = a_2/F_1,
$$  and $$
F_3=b_1+F_2, \> \> F_4=a_1/F_3, \> \> {\rm and} \> \> CF_3=b_0+F_4.
\end{equation}

Suppose we have a rational number with a finite decimal expansion or `repeating block'
and we wish to express it as a continued fraction. Say it is 3.14159 for instance.
Then
\begin{equation}
3.14159=3+\cfrac{14159}{100000}=3+\cfrac{14159}{7\times 14159+887}
=3+\cfrac{1}{7+\cfrac{887}{14159}}=3+\cfrac{1}{ 7+\cfrac{1}{\cfrac{14159}{887}}}.
\end{equation}
Continuing in this way, we see that this finite decimal is
\begin{equation}
3.14159
=3+\cfrac{1}{ 7+ \cfrac{1}{  15+\cfrac{1}{1+\cfrac{1}{25+\cfrac{1}{1+\cfrac{4}{29} }}}}}.          
\end{equation}
That is if I've done mys sums right.
Indeed Christiaan Huygens, the famous Dutch physicist and mathematician (1629-1695) found that
\begin{equation}
\pi=3 +\frac{1\vert}{\vert 7}+\frac{1 \vert}{\vert 15}+\frac{1 \vert}{\vert 1}
+\frac{1 \vert}{\vert 292}+\frac{1 \vert}{\vert 1}+\frac{1 \vert}{\vert 1}+\frac{1 \vert}{\vert 1}
+\frac{1 \vert}{\vert 2}+\frac{1 \vert}{\vert 1}+\frac{1 \vert}{\vert 3}+\frac{1 \vert}{\vert 1}
+\frac{1 \vert}{\vert 14}+\frac{1 \vert}{\vert 2}+\frac{1 \vert}{\vert 1}+\ldots
\end{equation}
Whenever we see an integer n>>1+, we have a `large number' plus something smaller than one: hence
we have good improvements in accuracy at that 292. Let's see how that works.
\begin{equation}
\pi \approx
3+\cfrac{1}{ 7+ \cfrac{1}{  15+\cfrac{1}{1+\cfrac{1}{292+1/...} }}}.          
\end{equation}
That 292+ is 292 plus some number less than one. We can drop it, and since 1/292 is pretty small
we can drop that too. Then  we get what is called the `Mettius approximation to $\pi$, namely
\begin{equation}
\pi \approx 3+\frac{16}{113}=3.141592920.....
\end{equation}
If we had included that 292, we would have found
\begin{equation}
\pi \approx 3+\frac{4687}{33102}=3.1415926530...
\end{equation}
So, we make the observation that if the infinit fraction converges to
some irrational $X$, then $X$ lies {\em between} any pair of convergents $C_n$
and $C_1$. The $n$'th convergent is obtained by truncating at $n$ terms.
In the case of $\pi$, the convergents $C_1,\>C_2,\>C_3$ are
22/7, 333/106, and 355/113. So $(3 < \pi < 22/7)$, $(22/7 < \pi < 333/106)$,
and $(333/106 < \pi < 355/113)$. This is true for all infinite continued fractions
that converge to a single definte value.

\section{The Euler-Wallis Relations and the Euler-Minding Relations}

Leonhard Euler a Swiss mathemetician and polymath (1707-1783) is probably known to anyone who
has studied mathematics. Jon Wallis (1616-1703) was an English mathemetician, who probably {\em should be}
 famous, at least in England (His book {\em Arithmetica Infinitorium} never left Eulers desk.)
Ernst Fedininand Adolf Minding (1806-1885)  was a German mathematicion of some note, but  far from well
known in modern times.

History aside: it was found that there are three term recurrence relations which make the computation of
successive convergents of continued fractions easy to handle. Given
\begin{equation}
CF_{\infty}=b_0 +\frac{a_1 \vert}{\vert b_1}+\frac{a_2 \vert}{\vert b_2}
+\frac{a_3 \vert}{\vert b_3}+\ldots
\end{equation}
The $n$'th convergent is a rational number
\begin{equation}
C_n=\frac{P_n}{Q_n},
\end{equation}
and the $P$s and $Q$s are integers.
We need the `start-off' defintions $P_{-1}=1$, $Q_{-1}=0$, $P_0=b_0$, and $Q_0=1$,
 and then we have for $n>1$
\begin{equation}
P_n=b_n P_{n-1}+a_n P_{n-2}
$$ and  $$
Q_n=b_n Q_{n-1}+a_n Q_{n-2}.
\end{equation}
These are the Euler-Wallis relations --- and are vital for any real computation.

\subsection{The Euler-Minding Relations: Rational Functions and Polynomials}


It shall become clear that, if we replace each of the $a_i$ with $a_i \times z$, with $z$ representing
 a complex variable, then the $P_n$ and $Q_n$ are arbitrary polynomials in $z$ and $P_n(z)/Q_n(z)$
is now a general rational function of $z$. If we replace 
{\em alternate} $b_i$ with $b_i z$ then $P_n$ and $Q_n$ are  are arbitrary polynomials in $w=1/z$,
and so $P_n(w)/Q_n(w)$ is also a rational function in $z$. Laurent expansions are of special interest,
 and so we may wish to work with $w$ rather than $z$.

The Euler-Minding relations tell us how to to calculate each fraction contributing 
to $P_n$ and 
$Q_n$  from the $a_i$ and $b_i$ directly.
In this way, we can use the Euler-Minding Relations to to work out the
 coefficients of $z^n$ in the polynomials
$P_n$ and $Q_n$ for given $a_i$ and $b_i$.

Now, we have mentioned that we do not need all those $a_i$ and $b_i$. We can arbitrarily
set all the $b_i$ (or $a_i$) to unity. When we look at a particular convergent 
and set of non-zero $b_i$, we can write down the convergent with all $b_i\rightarrow 1$
 by scaling the $a_i$ appropriately (see $C_4$ below in eqn.\ref{ScaleC4}).
 We shall hang on to the $b_i$ for now. The reason we are keeping the $b_i$
 is that we wish to continue with the convention that the numerators in the
continued fraction are integers, and that $P_n$ and $Q_n$ are integers.

Suppose we have a three term recurrence relations for some set of orthogonal polynomials $F_n$,
then identifing the Euler-Wallis relations for $P_n=b_n P_{n-1}+a_n P_{n-2}$ with
the recurrence relations for the polynomials allows us to set all the $a_i$ and $b_i$
 so that the numerator $P_n=F_n$. The Euler-Minding point us to a connection between
continued fractions, Pad{\'e} approximations to functions, and orthogonal-polynomials.

We shall see that the Euler-Minding relations are not  practical in the case large $n$,
 but they do make it easy to see the transition from continued fractions as representations
 of real numbers to representations of functions of real and complex variables.


Bearing all this in mind, we see that a bit of tedious algebra may be well worth 
the effort. Look at
\begin{equation}
C_{4}=b_0 +\cfrac{a_1}{b_1+\cfrac{a_2}{b_2+\cfrac{a_3}{b_3+\cfrac{a_4}{b_4}} }}.
\end{equation}
We can rewrite this as 
\begin{equation}
\frac{C_4}{b_0}=
1+\cfrac{a_1/(b_0 b_1)}{1+\cfrac{a_2/(b_1 b2)}{1+\cfrac{a_3/(b_2 b3)}{1+a_4/(b_3 b_4)} }}.
\label{ScaleC4}
\end{equation}
(Note that we {\em could} dispense with the $b_i$ altogether by scaling each $a_i$ as above,
 but that would abandon our convention that the $a_i$ along with $P_n$ and $Q_n$ are integers.)
Using the same basic manipulations we used when looking at the convergents for $\sqrt{2}$.
\begin{equation}
\frac{C_4}{b_0}=
1+\cfrac{a_1/(b_0 b_1)}{1+\cfrac{a_2/(b_1 b2)}{1+\cfrac{a_3/(b_2 b3)}{1+\cfrac{a_4}{b_3 b_4}} }}
$$   $$
=1+\cfrac{a_1/(b_0 b_1)}{1+  \cfrac{\cfrac{a_2}{b_1 b_2} \left (  1+\cfrac{a_4}{b_3 b_4} \right )}
{1+\cfrac{a_4}{b_3 b_4}+\cfrac{a_3}{b_2 b3} }  }
=1+\cfrac{\cfrac{a_1}{b_0 b_1}\left (1+\cfrac{a_4}{b_3 b_4}+\cfrac{a_3}{b_2 b3}\right)}{1+
\cfrac{a_4}{b_3 b_4}+\cfrac{a_3}{b_2 b3}+  \cfrac{a_2}{b_1 b_2} \left (  1+\cfrac{a_4}{b_3 b_4} \right )}.
$$   Lastly, $$
=\cfrac{ 1+
\cfrac{a_4}{b_3 b_4}+\cfrac{a_3}{b_2 b3}+  \cfrac{a_2}{b_1 b_2}
 \left (  1+\cfrac{a_4}{b_3 b_4} \right ) 
+\cfrac{a_1}{b_0 b_1} \left \lbrack 1+  \cfrac{a_3}{b_2 b_3}
 +\cfrac{a_4}{b_3 b_4} \right \rbrack  }
{1+
\cfrac{a_4}{b_3 b_4}+\cfrac{a_3}{b_2 b3}+  \cfrac{a_2}{b_1 b_2} \left (  1+\cfrac{a_4}{b_3 b_4} \right )}
$$   $$
=\cfrac{ 1+
\cfrac{a_4}{b_3 b_4}+\cfrac{a_3}{b_2 b3}+  \cfrac{a_2}{b_1 b_2}+\cfrac{a_1}{b_0 b_1}+
 \cfrac{a_2}{b_1 b_2} \cfrac{a_4}{b_3 b_4}
+\cfrac{a_3}{b_2 b_3} \cfrac{a_1}{b_0 b_1}+ \cfrac{a_4}{b_3 b_4}\cfrac{a_1}{b_0 b_1}  }
{1+
\cfrac{a_4}{b_3 b_4}+\cfrac{a_3}{b_2 b3}+  \cfrac{a_2}{b_1 b_2}+\cfrac{a_4}{b_3 b_4} \cfrac{a_2}{b_1 b_2}}.
\end{equation}
That is to say, that $C_4=P_4/Q_4$, and
\begin{equation}
\cfrac{P_4}{b_0}=1+\cfrac{a_1}{b_0 b_1}+\cfrac{a_2}{b_1 b_2}+\cfrac{a_3}{b_2 b3}+\cfrac{a_4}{b_3 b_4}
+\cfrac{a_1 a_3}{b_0 b_1 b_2 b_3} +\cfrac{a_1 a_4}{b_0 b_1 b_3 b_4}+\cfrac{a_2 a_4}{b_1 b_2 b_3 b_4},
$$   $$
Q_4=1+\cfrac{a_4}{b_3 b_4}+\cfrac{a_3}{b_2 b3}+  \cfrac{a_2}{b_1 b_2}+\cfrac{a_2 a_4}{b_1 b_2 b_3 b_4}.
\end{equation}
So,
\begin{equation}
C_4 =\cfrac{P_4}{Q_4}= \cfrac{b_0 \left [
1+\cfrac{a_1}{b_0 b_1}+\cfrac{a_2}{b_1 b_2}+\cfrac{a_3}{b_2 b3}+\cfrac{a_4}{b_3 b_4}
+\cfrac{a_1 a_3}{b_0 b_1 b_2 b_3} +\cfrac{a_1 a_4}{b_0 b_1 b_3 b_4}+\cfrac{a_2 a_4}{b_1 b_2 b_3 b_4} \right ]
}
{ 
1+\cfrac{a_4}{b_3 b_4}+\cfrac{a_3}{b_2 b3}+  \cfrac{a_2}{b_1 b_2}+\cfrac{a_2 a_4}{b_1 b_2 b_3 b_4}
}.
\end{equation}
We can multiply and divide by $b_1 b_2 b_3 b_4$, and
\begin{equation}
C_4 =\cfrac{P_4}{Q_4}= \cfrac{b_0 b_1 b_2 b_3 b_4 \left [
1+\cfrac{a_1}{b_0 b_1}+\cfrac{a_2}{b_1 b_2}+\cfrac{a_3}{b_2 b3}+\cfrac{a_4}{b_3 b_4}
+\cfrac{a_1 a_3}{b_0 b_1 b_2 b_3} +\cfrac{a_1 a_4}{b_0 b_1 b_3 b_4}+\cfrac{a_2 a_4}{b_1 b_2 b_3 b_4} \right ]
}
{ 
b_1 b_2 b_3 b_4 \left [ 1+\cfrac{a_4}{b_3 b_4}+\cfrac{a_3}{b_2 b3}+  \cfrac{a_2}{b_1 b_2}+\cfrac{a_2 a_4}{b_1 b_2 b_3 b_4}
  \right ]}.
\end{equation}

Now, it is noticeable that many of the terms in the numerator will be obtained by
expanding
\begin{equation}
A_4=b_0 b_1 b_2 b_3 b_4  \left ( 1+\cfrac{a_1}{b_0 b_1}  \right )\left ( 1+\cfrac{a_2}{b_1 b_2}  \right )
\left ( 1+\cfrac{a_3}{b_2 b_3}  \right )\left ( 1+\cfrac{a_4}{b_3 b_4}  \right )
\end{equation}
and it is also fairly clear that certain terms are missing. They are in fact, all those terms in the
expansion where a $b_i$ is raised to a power greater than 1. So, there are no $b_1^2$s in the denomonators of
the fractions of $A_4$. Indeed, if we put
\begin{equation}
P_4=[[A_4]]+\lbrace \lbrace A_4  \rbrace \rbrace,
\end{equation}
such that {\em only} terms where the $b_i$ are raised to the power of zero or one are put into $[[A_n]]$,
and only terms where one or more of the $b_i$ are raised to a power of two or more are
 put into  $\lbrace \lbrace A_n \rbrace \rbrace$ we find that $[[A_n]]$ is {\em always} an integer
and that $\lbrace \lbrace A_n \rbrace \rbrace$ is {\em never} an integer.
For this reason
 $[[A_n]]$ is called the integer part of $A_n$ and $\lbrace \lbrace A_n \rbrace \rbrace$ is called the fractional
part.

Euler used the Euler-Wallis formulae to prove that $P_n=[[A_n]]$ and that if we proceed in a similar way and define 
\begin{equation}
B_n=b_1 b_2 b_3 b_4 \left ( 1+\cfrac{a_2}{b_1 b_2}  \right )
\left ( 1+\cfrac{a_3}{b_2 b_3}  \right )\left ( 1+\cfrac{a_4}{b_3 b_4}  \right ) \ldots \left ( 1+\cfrac{a_n}{b_{n-1} b_n}  \right ),
\end{equation}
then $Q_n=[[B_n]]$.
Quite  often, the coefficient $b_0=0$. This is trivial to analise,  and we simply drop the 1+ at the start of the $[[P_n]]$ and
set $b_0=1$. To do this, we define other variants of $A_n$ and $B_n$.
We shall denote them as $\overline{[[A_n]]}$ and $\overline{[[B_n]]}$. The overlined quantities are just the $[[A_n]]$
and $[[B_n]]$ with the term in $b_n$ struck out. 

\subsection{The First Few $[[A_n]]$}

So, let's go about looking at things a bit more systematically. 
We suppose that $b_0 \ne 0$, so that $A_1=b_0 b_1\left (1+\cfrac{a_1}{b_0 b_1}\right )=[[A_1]]$ and $B_1=Q_1=1=[[B_1]]$.
Now, we shall concentrate on the numerator, and consider the $[[A_n]]$.
Noting that $\overline{[[A_1]]}=b_0 b_1 \times 1=b_1 [[A_0]]$,
\begin{equation}
[[A_2]]=b_2\left (1+\cfrac{a_2}{b_1 b_2}\right )[[A_1]]=b_2[[A_1]]+\cfrac{a_2}{b_1 } [[A_1]]=
b_2[[A_1]]+\cfrac{a_2}{b_1} \overline{[[A_1]]}=b_2 [[A_1]]+a_2 [[A_0]],
$$ also $$
[[A_2]]=b_0 b_1 b_2 \left (1+\cfrac{a_1}{b_0 b_1}+\cfrac{a_2}{b_1 b_2} \right ), \> \> \>
\overline{[[A_2]]}=b_0 b_1 b_2 \left (1+\cfrac{a_1}{b_0 b_1} \right )=b_2 \times [[A_1]].
\end{equation}
Then, 
\begin{equation}
[[A_3]]= b_3 \left (1+\cfrac{a_3}{b_2 b_3}\right )[[A_2]]=b_3 [[A_2]]+\cfrac{a_3}{b_2} [[A_2]]
=b_3 [[A_2]]+\cfrac{a_3}{b_2 }\overline{[[A_2]]}=b_3[[A_2]]+a_3 [[A_1]].
$$   $$
=b_0 b_1 b_2 b_3 \left (1+\cfrac{a_1}{b_0 b_1}+\cfrac{a_2}{b_1 b_2}+\cfrac{a_3}{b_2 b_3}
+\cfrac{a_1 a_3}{b_0 b_1 b_2 b_3} \right ).
\end{equation}
\begin{equation}
[[A_4]]=b_4 \left (1+\cfrac{a_4}{b_3 b_4}\right )[[A_3]]=b_4[[A_3]]+\cfrac{a_4}{b_3} \overline{[[A_3]]}.
$$  $$
[[A_4]]=b_4 [[A_3]]+a_4[[A_2]]
=b_0 b_1 b_2 b_3 b_4 \left (1+\cfrac{a_1}{b_0 b_1}+\cfrac{a_2}{b_1 b_2}+\cfrac{a_3}{b_2 b_3}+\cfrac{a_1 a_3}{b_0 b_1 b_2 b_3}
+\cfrac{a_4}{b_3 b_4}\left ( 1+\cfrac{a_1}{b_0 b_1}++\cfrac{a_2}{b_1 b_2}  \right )        \right ) 
$$  $$ 
=b_0 b_1 b_2 b_3 b_4 \left ( 1+\cfrac{a_1}{b_0 b_1}+\cfrac{a_2}{b_1 b_2}+\cfrac{a_3}{b_2 b_3}+\cfrac{a_4}{b_3 b_4}       
+\cfrac{a_1 a_3}{b_0 b_1 b_2 b_3}+\cfrac{a_1 a_4}{b_0 b_1 b_3 b_4}+\cfrac{a_2 a_4}{b_1 b_2 b_3 b_4} \right ).
\end{equation}
Also
\begin{equation}
\overline{[[A_4]]}=b_0 b_1 b_2 b_3 b_4 \left (1+\cfrac{a_1}{b_0 b_1}+\cfrac{a_2}{b_1 b_2}+\cfrac{a_3}{b_2 b_3}+
\cfrac{a_1 a_3}{b_0 b_1 b_2 b_3} \right) =b_4 [[A_3]].
\end{equation}
So we see the patterns emerging from the underlying Euler Wallis formulae.
\begin{equation}
\overline{[[A_n]]}=b_n[[A_{n-1}]], \> \> \> \> [[A_n]]=b_n[[A_{n-1}]]+a_n [[A_{n-2}]].
\end{equation}

The thing is we want to be able to write down $P_n$ and $Q_n$ explicitly in terms of the $a_i$ and $b_i$.
We shall have to work out a fair few terms, starting with
\begin{equation}
\cfrac{[[A_0]]}{b_0}=1, \> \>  \frac{[[A_1]]}{b_0 b_1}=1+\cfrac{a_1}{b_0 b_1}, \> \>
\frac{[[A_2]]}{b_0 b_1 b_2}=1+\cfrac{a_1}{b_0 b_1}+\cfrac{a_2}{b_1 b_2}.
\end{equation} 
Then, the Euler-Wallis relations tell us
\begin{equation}
\frac{[[A_3]]}{b_0 b_1 b_2 b_3}=1+\cfrac{a_1}{b_0 b_1}+\cfrac{a_2}{b_1 b_2}
+\frac{a_3}{b_2 b_3}\left (  1+\cfrac{a_1}{b_0 b_1} \right )
$$     $$
=1+\sum_{i=1}^{3} \cfrac{a_i}{b_{i-1}{b_i}}
+\cfrac{a_3}{b_2 b_3 }\sum_{i=1}^{1} \cfrac{a_i}{ b_{i-1} b_i}.
\end{equation}
Then
\begin{equation}
\cfrac{[[A_4]]}{b_0 \ldots b_4}=[[A_3]]+\cfrac{a_3}{b_2 b_3} [[A_2]],
$$    $$
=1+\sum_{i=1}^4 \cfrac{a_i}{b_{i-1} b_i} +\cfrac{a_3}{b_2 b_3}\sum_{i=1}^1 \cfrac{a_i}{b_{i-1} b_i}  
+\cfrac{a_4}{b_3 b_4} \sum_{i=1}^2 \cfrac{a_i}{b_{i-1} b_i}
$$   $$ 
\cfrac{[[A_4]]}{b_0 \ldots b_4}=
1+\sum_{i=1}^4 \cfrac{a_i}{b_{i-1} b_i}
+\sum_{k=3}^4 \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
\end{equation}
We see that $[[A_0]]$ is has zero for the highest order in the $a^i$, then $[[A_1]]$ and $[[A_2]]$
have one as the highest order, and $[[A_1]]$ and $[[A_2]]$ have second order terms.
The $[[A]]_k$ jump an order at every odd value of $k$.
Now
\begin{equation}
\cfrac{[[A_5]}{b_0 \ldots b_5}=[[A_4]]+\cfrac{a_5}{b_4 b_5} [[A_3]],
$$     $$
=1+\sum_{i=1}^5 \cfrac{a_i}{b_{i-1} b_i}
+\sum_{k=3}^4 \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
$$       $$
+\cfrac{a_5}{b_4 b_5} \left (
\sum_{i=1}^4 \cfrac{a_i}{b_{i-1} b_i}
+\sum_{k=3}^4 \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
\right ),
$$     $$
=1+\sum_{i=1}^5 \cfrac{a_i}{b_{i-1} b_i}
+\sum_{k=3}^4 \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
+\cfrac{a_5}{b_4 b_5} 
\sum_{i=1}^3 \cfrac{a_i}{b_{i-1} b_i}
+\cfrac{a_5}{b_4 b_5} \sum_{k=3}^3 \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i},
$$  so    $$
\cfrac{[[A_5]}{b_0 \ldots b_5}=1+\sum_{i=1}^5 \cfrac{a_i}{b_{i-1} b_i}
+\sum_{k=3}^5 \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
+\sum_{l=5}^5\cfrac{a_l}{b_{l-1} b_l}
 \sum_{k=3}^{l-2} \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}.
\end{equation}
We shall look at both $[[A_6]]$ and $[[A_7]]$ for good measure.
\begin{equation}
\cfrac{[[A_6]}{b_0 \ldots b_6}=[[A_5]]+\cfrac{a_6}{b_5 b_6} [[A45]]
$$  $$
=1+\sum_{i=1}^5 \cfrac{a_i}{b_{i-1} b_i}
+\sum_{k=3}^5 \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
+\sum_{l=5}^5\cfrac{a_l}{b_{l-1} b_l}
 \sum_{k=3}^{l-2} \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
$$  $$
+\cfrac{a_6}{b_5 b_6}  \left (
1+\sum_{i=1}^4 \cfrac{a_i}{b_{i-1} b_i}
+\sum_{k=3}^4 \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
\right )
$$      $$
= \left (
1+\sum_{i=1}^6 \cfrac{a_i}{b_{i-1} b_i}
+\sum_{k=3}^5 \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
+\sum_{l=5}^5\cfrac{a_l}{b_{l-1} b_l}
 \sum_{k=3}^{l-2} \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
\right )
$$      $$
+\cfrac{a_6}{b_5 b_6}  \left (
\sum_{i=1}^4 \cfrac{a_i}{b_{i-1} b_i}
+\sum_{k=3}^4 \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
\right )
$$     $$
= \left (
1+\sum_{i=1}^6 \cfrac{a_i}{b_{i-1} b_i}
+\sum_{k=3}^{6} \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
+\sum_{l=5}^6\cfrac{a_l}{b_{l-1} b_l}
 \sum_{k=3}^{l-2} \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
\right ).
\end{equation}
We then expect that
\begin{equation}
\cfrac{[[A_7]}{b_0 \ldots b_7}=[[A_6]]+\cfrac{a_7}{b_6 b_7} [[A_5]]
$$  $$
= \Bigg (
1+\sum_{i=1}^7 \cfrac{a_i}{b_{i-1} b_i}
+\sum_{k=3}^{7} \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
+\sum_{l=5}^7\cfrac{a_l}{b_{l-1} b_l} \
 \sum_{k=3}^{l-2} \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
$$   $$
+\sum_{m=7}^7\cfrac{a_m}{b_{m-1} b_m}\sum_{l=5}^{m-2} \cfrac{a_l}{b_{l-1} b_l}
 \sum_{k=3}^{l-2} \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
\Bigg ).
\end{equation}
This is correct, and we have established the general form of $[[A_n]]$. To state the obvious, 
if we proceed to try and use these formulae for large $n$, we shall soon run into trouble!
For $n=100$ say, the one-hundred deep nested sum for the last term has few terms, but the
 50th cofficient has a fifty deep nested sum, each with many terms. 
We shall look at these formulae again in terms of practical computation.

\subsection{The $[[B_n]]$ and The Special Case $b_0=0$}

The $B_n$ are defined to be
\begin{equation}
B_n= b_1 b_2 b_4 \ldots b_n \left(1+\cfrac{a_2}{b_1 b_2} \right )
\left(1+\cfrac{a_3}{b_2 b_3} \right ) \ldots \left(1+\cfrac{a_n}{b_{n-1} b_n} \right ).                       
\end{equation}
If subtract one from each subscript, we get $B_n^\prime$ where 
\begin{equation}
B_n^\prime= b_0 b_1 b_2 \ldots b_{n-1} \left (1+\cfrac{a_1}{b_0 b_1} \right )
\left(1+\cfrac{a_2}{b_1 b_2} \right ) \ldots \left (1+\cfrac{a_{n-1}}{b_{n-2} b_{n-1}} \right ).                       
\end{equation}
That is, the correct expression for $[[B_n]]$ is the expression for $[[A_{n-1}]]$
 except with each index shifted up by 1.

The special case where $b_0$ is zero is important. It is very common that $b_0$ is zero, and
so it is an `absolute must' to see what to do in this case.
To see what happens, suppose $b_0 \ne 0$, and look at the $n$'th convergent of an infinite
 continued fraction.
\begin{equation}
C_n=\cfrac{P_n}{Q_n}=\cfrac{[[A_n]]}{[[B_n]]}
=\cfrac{ \cfrac{[[A_n]]}{b_0 b_1 \ldots b_n}  }{  \cfrac{[[B_n]]}{b_0 \times b_1 b_2  \ldots b_n}   }
$$    $$
=\cfrac{    \cfrac{b_0}{1} \times  \cfrac{[[A_n]]}{b_0 b_1 \ldots b_n}    }
       {    \cfrac{b_0}{1} \times  \cfrac{[[B_n]]}{b_0 \times b_1 b_2  \ldots b_n}  }
$$    $$
=\cfrac{  \left ( b_0 +b_0 \sum +b_0 \sum \sum+\ldots \right )   }
{ \left ( 1 +\sum^\prime +\sum^\prime \sum^\prime +\ldots \right )   }.
\end{equation}
We have used primes to indicate that the nested sums in the denominator to indicate
 that they are not the same as the nested sums in the numerator.

We note, that in the innermost of each nested sum, there is a $b_0$ which cancels the multiplication
by $b_0$. We shall just consider the double summation in $[[A_7]]$,
\begin{equation}
\sum\sum=b_0 \sum_{k=3}^{7} \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
=\sum_{k=3}^{7} \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{1} \cfrac{a_i}{ b_i}
+ b_0 \sum_{k=3}^{7} \cfrac{a_k}{b_{k-1} b_k}\sum_{i=2}^{k-2} \cfrac{a_i}{b_{i-1} b_i}.
\end{equation}
When we set $b_0 \rightarrow 0$,
\begin{equation}
\sum\sum\rightarrow
=\frac{a_1}{b_1}\sum_{k=3}^{7} \cfrac{a_k}{b_{k-1} b_k}.
\end{equation} 
Setting $b_0$ to zero replaces the innermost of the nested summations with a constant term.

\section{Contined Fractions as Functions of a Complex Variable}

It is easy to see, that if we put $a_i \rightarrow a_i z$, that we get
\begin{equation}
\frac{P_n}{Q_n}=\frac{b_0}{1} \times \cfrac{ 1+z\sum+z^2 \sum \sum +z^3 \sum \sum \sum + \ldots }
                                            { 1+z\sum+z^2 \sum \sum +z^3 \sum \sum \sum + \ldots }.
\end{equation}
If we put $w=1/z$ and set $b_i \rightarrow b_i z$ for $i=1,2,3,4,\ldots$, then 
\begin{equation}
\frac{P_n}{Q_n}=\frac{b_0}{1} \times \cfrac{ 1+w^2 \sum+w^4 \sum \sum +w^6 \sum \sum \sum + \ldots }
                                            { 1+w^2\sum+w^4 \sum \sum +w^6 \sum \sum \sum + \ldots }.
\end{equation}
Of course, we may also set $b_0 \rightarrow b_0 z=b_0/w$ also.
Then, we might set $b_i \rightarrow b_i z$ for $i=0,2,4,6,8, \ldots$, in which case
\begin{equation}
\frac{P_n}{Q_n}=\frac{b_0}{w} \times \cfrac{ 1+w \sum+w^2 \sum \sum +w^3 \sum \sum \sum + \ldots }
                                            { 1+w \sum+w^2 \sum \sum +w^3 \sum \sum \sum + \ldots }.
\end{equation}
As yet another alternative, we might put
Of course, we may also set $b_0 \rightarrow b_0 z=b_0/w$ also.
Then, we might set $b_i \rightarrow b_i z$ for $i=1,3,5,7,9, \ldots$.
Then
\begin{equation}
\frac{P_n}{Q_n}=\cfrac{b+0}{1} \times \cfrac{ 1+w \sum+w^2 \sum \sum +w^3 \sum \sum \sum + \ldots }
                                            { 1+w \sum+w^2 \sum \sum +w^3 \sum \sum \sum + \ldots }.
\end{equation}

Now, the $Q_n$ are independent of $b_0$. If we 
choose  $b_i \rightarrow b_i z$ for $i=2,4,6 \ldots$, we find that the first few $[[B_n]]$ are
\begin{equation}
\cfrac{[[B_1]]}{b_1}=1, \> \> \cfrac{[[B_2]]}{b_1 b_2 z}=1+\cfrac{a_2 w}{b_1 b_2}
$$  $$
\cfrac{[[B_3]]}{b_1 b_2 b_3 z}=1+\cfrac{a_2 w}{b_1 b_2}+\cfrac{a_3 w}{b_2 b_3},
$$    $$
\cfrac{[[B_4]]}{b_1 b_2 b_3 b_4 z^2}=1+\left (
            \cfrac{a_2 }{b_1 b_2}+\cfrac{a_3 }{b_2 b_3}+\cfrac{a_4 }{b_3 b_4}
                                      \right ) w+\cfrac{a_2 a_4 }{b_1 b_2 b_3 b_4} w^2,
$$  and $$ 
\cfrac{[[B_5]]}{b_1 b_2 b_3 b_4 b_5 z^2}=
1+\left ( \cfrac{a_2}{b_1 b_2}+\cfrac{a_3}{b_2 b_3}+\cfrac{a_4}{b_3 b_4}+\cfrac{a_5}{b_4 b_5} \right ) w       
+\left (\cfrac{a_2 a_4}{b_1 b_2 b_3 b_4}+\cfrac{a_2 a_5}{b_1 b_2 b_4 b_5}+\cfrac{a_3 a_5}{b_2 b_3 b_4 b_5}
\right ) w^2.  
\end{equation}
Suppose we want to find $Q_n=1$. We must insist that none of the $a_i, \> b_i$ are finite
 and non zero. Clearly, $Q_n=1$ is not possible if $n$ is even. When $n$ is even, the last term which is
the coefficient of $w^{n/2}$ has a coefficient which is a single product of the $a_i/b_{i-1}b_i$
and cannot vanish. It would seem possible if $n$ is odd. This turns out
 to be so  so for a {\em particlular} odd value of $n$. However, given the sets $a_i$ and $b_i$,
 and $[[B_1]]/b_1]=1$, we can set  $[[B_3]]/(b_1 b_2 b_3 z)]=1$ by setting $a_3$ in terms
 of $a_1, a_2, b_1, b_2$, and $b_3$. Once this is done, it turns out we cannot
 set  $[[B_5]]/(b_1 b2 b_3 b_4 b_5 z^2)]=1$ as well. The redundancy of half the coefficient does 
not help us. So, to simplify matters, the usual convention is to choose
 $\lbrace b_1, b_2, b_3, b_4, b_5, \ldots \rbrace$ $=\lbrace 1,z,1,z,1,\ldots \rbrace$ or
$\lbrace z,1,z,1,z\ldots \rbrace$. If we are given sets $a_i$ and $b_i$, we 
 set $a_i^\prime=a_i/b_{i-1}b_i$, and set $b_i^\prime \rightarrow 1$ as in eqn.\ref{ScaleC4}.
When we do so, we {\em absolutely must} remember that we have abandoned our convention
that the $a_i$ are integers. 

\subsection{Practical Computation}

We shall just consider an example where we wish to compute$P_7$ involving 
\begin{equation}
\cfrac{[[A_7]}{b_0 \ldots b_7}
= \Bigg (
1+\sum_{i=1}^7 \cfrac{a_i}{b_{i-1} b_i}
+\sum_{k=3}^{7} \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
+\sum_{l=5}^7\cfrac{a_l}{b_{l-1} b_l} \
 \sum_{k=3}^{l-2} \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
$$   $$
+\sum_{m=7}^7\cfrac{a_m}{b_{m-1} b_m}\sum_{l=5}^{m-2} \cfrac{a_l}{b_{l-1} b_l}
 \sum_{k=3}^{l-2} \cfrac{a_k}{b_{k-1} b_k}\sum_{i=1}^{k-2} \cfrac{a_i}{b_{i-1} b_i}
\Bigg ).
\end{equation}

The innermost sums in the nested summations are partial sums
\begin{equation}
s_k=\sum_{i=1}^k \cfrac{a_i}{b_{i-1} b_i}, \> \> k=1,2 \ldots 7
\end{equation}

Then
\begin{equation}
\cfrac{[[A_7]]}{b_0 \ldots b_7}
= \Bigg (
1+s_7
+\sum_{k=3}^{7} \cfrac{a_k}{b_{k-1} b_k} s_{k-2}
+\sum_{l=5}^7\cfrac{a_l}{b_{l-1} b_l} \
 \sum_{k=3}^{l-2} \cfrac{a_k}{b_{k-1} b_k}s_{k-2}
$$   $$
+\sum_{m=7}^7\cfrac{a_m}{b_{m-1} b_m}\sum_{l=5}^{m-2} \cfrac{a_l}{b_{l-1} b_l}
 \sum_{k=3}^{l-2} \cfrac{a_k}{b_{k-1} b_k} s_{k-2}
\Bigg ).
\end{equation}
Next, we can define
The innermost sums in the nested summations are partial sums
\begin{equation}
t_k=\sum_{i=3}^k \cfrac{a_k}{b_{k-1} b_k}, \> \> k=3,4 \ldots 7,
\end{equation}
so that
\begin{equation}
\cfrac{[[A_7]]}{b_0 \ldots b_7}
= \Bigg (
1+s_7
+t_7
+\sum_{l=5}^7\cfrac{a_l}{b_{l-1} b_l} 
 t_{l-2} s_{l-4}
$$   $$
+\sum_{m=7}^7\cfrac{a_m}{b_{m-1} b_m}\sum_{l=5}^{m-2} \cfrac{a_l}{b_{l-1} b_l}
 t_{l-2} s_{l-4}
\Bigg ).
\end{equation}
Lastly, if we put
\begin{equation}
u_m=\sum_{k=5}^m \cfrac{a_k}{b_{k-1} b_k} t_{k-2} s{k-4}, \> \> m=5,6, \> \> {\rm and } \> \>7.
\end{equation}

\begin{equation}
\cfrac{[[A_7]]}{b_0 \ldots b_7}
= \left  (
1+s_7+t_7+u_5+u_6+u_7
+\sum_{m=7}^7\cfrac{a_m}{b_{m-1} b_m} u_m
\right ).
\end{equation}







\end{document}
